AmoSendler โฑ๏ธ โ ๐ผ

ะะตะฝะดะธะฝะณโัะพัะผะฐ, ะบะพัะพัะฐั ะทะฐ 1ยะบะปะธะบ ัะพะทะดะฐัั ัะดะตะปะบั ะธ ะบะพะฝัะฐะบั ะฒ AmoCRM (Kommo)
ะฟะปัั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะผะตัะฐะตั, ะฑัะปยะปะธ ะฟะพัะตัะธัะตะปั ะฝะฐยัััะฐะฝะธัะต ะฑะพะปััะต 30ยัะตะบัะฝะด.



โจ ะะพะทะผะพะถะฝะพััะธ

ะคัะฝะบัะธั

ะงัะพ ะดะตะปะฐะตั

HTMLโัะพัะผะฐ

ะะผั,ยEโmail,ยะขะตะปะตัะพะฝ,ยะฆะตะฝะฐ

ะขะฐะนะผะตั

ะะตะทยJS ะฝะฐ ะบะปะธะตะฝัะตยโ ะฒัะตะผั ะฒััะธัะปัะตััั ะฒยPHP

API v4

ะกะพะทะดะฐะฝะธะต ัะดะตะปะบะธ ะธ ะบะพะฝัะฐะบัะฐ ะพะดะฝะธะผ ะทะฐะฟัะพัะพะผ /leads/complex

ะัะผะตัะบะฐยะฑะพะปััะต 30ยัะตะบ

ะะฐะฟะธััะฒะฐะตััั ะฒยะบะฐััะพะผะฝะพะต ะฟะพะปะตโัะปะฐะณ

ะะฒัะพโrefresh ัะพะบะตะฝะฐ

ะัะธย401ยัะบัะธะฟั ะทะฐะฟัะฐัะธะฒะฐะตั ะฝะพะฒัะน access_token ัะตัะตะท refresh_token

Alertโั

ะฃัะฟะตั / ะัะธะฑะบะฐ ะฑะตะท ะฟะตัะตะทะฐะณััะทะบะธ ัััะฐะฝะธัั

๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

/public_html/
โโโ ะะฐะทะฒะฐะฝะธะต ะฟัะพะตะบัะฐ/
    โโ index.php      # ัััะฐะฝะธัะฐโัะพัะผะฐ
    โโ lead.php       # ะพะฑัะฐะฑะพััะธะบ, ัะฐะฑะพัะฐ ั API AmoCRM
    โโโ style.css     # (ะฝะตะพะฑัะทะฐัะตะปัะฝะพ) ะฒะฐั ััะธะปั

โ๏ธ ะขัะตะฑะพะฒะฐะฝะธั

PHPย7.4+ (ัะฐััะธัะตะฝะธะต curl ะฒะบะปััะตะฝะพ)

ะัะฑะพะน ัะธะฟ ัะพััะธะฝะณะฐ (shared/VPS)

ะะพะผะตะฝ, ั ะบะพัะพัะพะณะพ ะฑัะดะตั ะพะฑัะฐัะฐัััั ัะพัะผะฐ

ะฃัััะบะฐ AmoCRMย/ Kommo ั ะฟัะฐะฒะฐะผะธ ะฐะดะผะธะฝะธัััะฐัะพัะฐ

๐ ะฃััะฐะฝะพะฒะบะฐ

ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน ะธะปะธ ัะบะพะฟะธััะนัะต ะบะฐัะฐะปะพะณ AmoSendler ะฒ ะฟะฐะฟะบั ัะฐะนัะฐ.

ะกะพะทะดะฐะนัะต ะะฝะตัะฝัั ะธะฝัะตะณัะฐัะธั ะฒ AmoCRM:

ัะพััะฐะฝะธัะต client_id, client_secret;

ะฝะฐะถะผะธัะต ยซะฃััะฐะฝะพะฒะธััยป โ ัะบะพะฟะธััะนัะต authorization_code.

ะะฑะผะตะฝัะนัะต ะบะพะด ะฝะฐ access_token ะธ refresh_token:

curl -X POST https://<SUBDOMAIN>.amocrm.ru/oauth2/access_token \
     -H 'Content-Type: application/json' \
     -d '{
           "client_id":     "...",
           "client_secret": "...",
           "grant_type":    "authorization_code",
           "code":          "AUTH_CODE",
           "redirect_uri":  "https://example.com/oauth"
         }'

ะ ะะฐััะพัะบะต ัะดะตะปะบะธ ัะพะทะดะฐะนัะต ัะตะบโะฑะพะบั (ะธะปะธ ัะตะบััะพะฒะพะต) ะฟะพะปะต:

ะฝะฐะทะฒะฐะฝะธะตยโ ยซะะฐ ัะฐะนัะต ะฑะพะปััะต 30ยัะตะบยป;

ะทะฐะฟะพะผะฝะธัะต ID (ะฝะฐะฟัะธะผะตัย338991).

ะัะบัะพะนัะต lead.php ะธ ะทะฐะฟะพะปะฝะธัะต ะบะพะฝััะฐะฝัั:

const SUBDOMAIN     = 'mycompany';          // ะฑะตะท .amocrm.ru
const ACCESS_TOKEN  = 'xxxxxxxx';
const REFRESH_TOKEN = 'yyyyyyyy';
const TIME_FIELD_ID = 338991;               // ID ะฟะพะปัโัะปะฐะณะฐ

ะะฐะณััะทะธัะต ัะฐะนะปั ะฝะฐ ัะตัะฒะตั. ะะพัะพะฒะพ!

๐งโ๐ป ะัะฟะพะปัะทะพะฒะฐะฝะธะต

ะะตัะตะนะดะธัะต ะฒ ะฑัะฐัะทะตัะต ะฝะฐ index.php.

ะะฐะฟะพะปะฝะธัะต ัะพัะผั.

ะัะปะธ ะฟะพัะตัะธัะตะปั ะฑัะป ะฝะฐ ัััะฐะฝะธัะต > 30ยัะตะบยโ ะฒ ะฝะพะฒะพะน ัะดะตะปะบะต ะฟะพะปะตโัะปะฐะณ = true.

ะัะต ััะฐัััั ะฒัะฒะพะดัััั ะผะพะดะฐะปัะฝัะผะธ alert().

๐ ะะตะทะพะฟะฐัะฝะพััั

ะขะพะบะตะฝั ััะฐะฝัััั ัะพะปัะบะพ ะฝะฐ ัะตัะฒะตัะต ะธ ะฝะธะบะพะณะดะฐ ะฝะต ะฟะพะฟะฐะดะฐัั ะฒ ะฑัะฐัะทะตั.

ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑะฝะพะฒะปัะตั access_token, ะทะฐะฟะธััะฒะฐั ะตะณะพ ะฒ access_token.tmp.

ะะปั ะฑะพะตะฒะพะณะพ ะฟัะพะดะฐะบัะตะฝะฐ ัะตะบะพะผะตะฝะดัะตััั ะฒัะฝะตััะธ ัะพะบะตะฝั ะฒ .env + ะทะฐะบัััั ะดะพัััะฟ ะบ ะบะฐัะฐะปะพะณั AmoSendler ะฟะพย.htaccess.

๐ ะะธัะตะฝะทะธั

JQuBiiK ยฉ 2025 โ Feelยfree to fork & contribute โ๏ธ

